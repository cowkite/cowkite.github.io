---
layout: post
title: 코드리뷰 문화 정착기
subtitle: git hook과 pull-request를 통해 코드리뷰 문화 도입하기
type: Develop
blog: true
text: true
post-header: true
draft: true
header-img: "img/about.png"
date: 2020-03-06 23:58
---



### 🙋‍♀️ 과거의 나에게 코드리뷰란

꽤 오랜기간 나에게 '코드리뷰'라는 것은, 오프라인 미팅에서 프로젝터를 통해 코드를 설명하며 무언가 논쟁(?)을 하는 자리였다. 어떤 날에는 분위기가 좋으면 원만하게 끝났지만, 각 참석자들이 어떤 포인트에 대해 이견이 발생하면 과도한 논쟁으로 이어지기도했었다. 때때로 그건 개인적인 개발습관 간의 차이이기도 했으므로, 점점 그 조직에서 '코드리뷰'는 불편하고 어려운 자리가 되었다. 이러한 분위기 속에서 점차 다른 사람의 코드에 대해 의견을 주기 보다는 일단 이해하려는 분위기가 형성되었으므로, 우리는 서로의 코드에 대해 터치하지 않았다.

### 🤔 뭐가 문제였을까?

#### SVN

일단 svn 환경이었기 때문에, 코드 분기나 병합 없이 여러 사람이 하나의 트렁크에서 작업을 이어나갔다. 그렇게 작업을 하다보면 언제, 누가, 어떤 기능을 개발했는지를 챙기기가 어렵다. 특히 바쁠 때에는 하루에도 몇 십개의 피쳐가 커밋되기 때문에 놓치는 업데이트들이 많아지고, 그러다보면 일일이 개발자들을 붙잡고 하나하나 설명해달라고 할 수가 없는 것이다.

#### 오프라인 코드리뷰의 번거로움

또한 pr이 가능한 git과 달리, svn에서는 별 다른 리뷰툴이 없기 때문에 오프라인으로 코드리뷰를 진행해야만 했는데, 그러다보면 개발자들이 모두 가능한 시간을 맞추기도 어려웠다. 사실 시간이 안 맞아서보다는 오프라인 미팅을 잡고 프로젝터로 코드를 공유하는데에 시간을 굳이 써야했기 때문에 다들 어지간한 건이 아니면 이를 번거로워했다.

#### 왜 리뷰는 항상 주니어의 몫인가

대개 코드리뷰는 항상 이런식으로 요청 되었다.

🙎‍♀️(시니어): 그거 어디까지 개발됐어요?

🙍‍♂️(주니어): A 기능까지 개발완료됐습니다.

🙎‍♀️(시니어): 그럼 지금 작업한데까지 내일 오전에 리뷰 한번 진행해주세요.

코드를 리뷰잉하는 것보다는 검사(?)를 받는 것에 더 포커싱이 맞춰져있는 리뷰였다. 마치 아이가 학생에게 숙제 검사 받듯이 주니어는 시니어에게 코드의 품질을 검사받았다. 과연 이 과정 속에서 시니어도 얻어가는 게 있었을까?

#### 리뷰의 대상

리뷰를 진행하다보면, 때때로 중요하지않은 논쟁들로 10분 이상 논쟁하기도 했다. 과연 지금 시점에서 그 단계까지 고민하는것이 맞는것인가? 생각이 드는 질문들, 혹은 개인의 취향에 따른 코딩 스타일들. 수개월 진행한 프로젝트에서, if else 를 한줄에 쓰니 마니 괄호를 여니 마니 하는 이야기들이 오고간다는 것은 이미 잘못되었다는 것이다.

#### 애석한 믿음

사실 같이 2-3개 프로젝트를 진행하게되면 서로의 개발 스타일을 잘 알게된다. 코드 몇 줄만 봐도 누가 짰는지가 뻔히 보이고, 그 사람이 개발한 신규 피쳐에 대해서 굳이 질문하지않아도 척척 갖다 쓸 수 있게 된다. 그러다보면 코드리뷰의 필요성을 느끼지 않게 된다. '굳이 왜?' 싶은거다.



### 🙌 코드리뷰의 중요성

#### 버그의 조기 발견

당연한 이야기지만, 한 사람이 보는 것보다 여러 사람이 보는 것이 버그를 발견하기 유용하다. 내가 생각하지 못했던 것도 누군가는 한 눈에 찾아낼 것이다. 특히나 하나의 fix 작업에 세개의 side effect를 발생시키는 개발자가 조직 내에 있다면.. 중요성은 더 말할 것도 없다.

#### 수준 상향 평등화

코드 리뷰의 또 다른 장점으로는 다른 사람의 잘 만들어진 코드를 보면서 배울 기회를 얻는 것이다. 같은 환경에서 개발을 진행하더라도 개인별로 해당 언어나 프레임워크에 대한 이해도와 경험은 크게 차이가 날 수 있다. 예를 들어, 프로그래밍 언어와 프레임워크가 추구하고자 하는 기본 철학을 이해하고 그에 맞는 방식을 유지하려고 노력하는 사람이 있으며, 기존에 다른 환경에서 개발하던 방식을 벗어나지 못하고 현재 환경의 장점을 활용하지 못하는 사람이 있다. 또한, 언어나 프레임워크가 기본적으로 제공하는 손쉬운 기능들을 잘 숙지하고 적절히 활용하는 사람이 있는가 하면, 이미 만들어져 있는 기능을 사용하지 못하고 직접 불필요한 기능을 추가하는 사람도 있다. 이러한 개인 간의 격차를 해소하는 가장 좋은 방법이 바로 코드리뷰이며 이를 통해 조금 더 좋은 방법을 제시해주고 이해 수준을 상향 평준화하는 것이다. 즉, 코드리뷰는 단순히 버그를 사전에 발견하거나 문제점을 찾는 목적을 넘어서 전체적인 조직의 역량을 강화하는 중요한 역할을 한다.

#### 개발 표준 준수

정해진 표준 준수를 통해서 많은 사람들의 개발 결과물이 일관된 스타일을 유지할 수 있도록 도와준다.

#### 연대 책임

코드리뷰가 없고, 다른 사람이 어떤 부분을 어떻게 개발하고 있는지 모르는 상황에서는 특정한 문제가 발견했을 때 그 원인이 누구의 코드에 있는 지를 찾으려는 모습을 자주 확인할 수 있다. 코드리뷰 문화가 정착되면 특정 코드에 문제가 발생했을 때 누군가에게 책임을 묻거나 비난하는 문화를 없앨 수 있다. 즉, 배포된 코드에 문제가 있어서 서비스의 장애나 이슈가 발생한 경우 그 문제는 코드를 개발한 사람뿐 만 아니라, 해당 변경사항을 확인한 모든 사람이 연관되어 있기 때문에 그 책임이 누구에게 있는지를 찾기보다 왜 그 문제를 사전에 발견할 수 없었는지에 초점을 맞출 수 있게 된다. 다시 말해, 코드리뷰의 핵심은 ‘개발 결과물에 대한 책임이 그 코드를 만든 사람 개인에게 있지 않고, 우리 모두에게 있다는 문화를 정착하는 것’에 있다.



## 🌱 코드리뷰 시작하기

...작성중